#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Gitleaks„Åß„Ç∑„Éº„ÇØ„É¨„ÉÉ„Éà„Çπ„Ç≠„É£„É≥
if command -v gitleaks &> /dev/null; then
  echo "üîç Running gitleaks scan..."
  gitleaks protect --verbose --redact --staged
  if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå Gitleaks detected secrets in your commit!"
    echo "   Please remove sensitive data before committing."
    echo ""
    echo "   If this is a false positive, add it to .gitleaksignore"
    echo ""
    exit 1
  fi
  echo "‚úÖ No secrets detected"
else
  echo "‚ö†Ô∏è  gitleaks not installed. Install with: brew install gitleaks"
  echo "   Skipping secret scan..."
fi
